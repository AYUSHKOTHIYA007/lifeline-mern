{"ast":null,"code":"// src/admin/ManageRequests.jsx\nimport React,{useState,useEffect}from'react';import{useNavigate}from'react-router-dom';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const API_BASE_URL='http://localhost:5000';function ManageRequests(){const[requests,setRequests]=useState([]);const navigate=useNavigate();const fetchRequests=async()=>{const response=await fetch(\"\".concat(API_BASE_URL,\"/api/admin/requests\"));const data=await response.json();setRequests(data);};useEffect(()=>{if(localStorage.getItem('isAdmin')!=='true')navigate('/admin/login');else fetchRequests();},[navigate]);const handleUpdateStatus=async(requestId,status)=>{await fetch(\"\".concat(API_BASE_URL,\"/api/admin/requests/\").concat(requestId),{method:'PUT',headers:{'Content-Type':'application/json'},body:JSON.stringify({status})});fetchRequests();};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"h2 mb-4\",children:\"Manage Blood Requests\"}),/*#__PURE__*/_jsx(\"div\",{className:\"card shadow-sm\",children:/*#__PURE__*/_jsx(\"div\",{className:\"card-body\",children:/*#__PURE__*/_jsx(\"div\",{className:\"table-responsive\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"table table-hover\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Patient\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Blood Group\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Units\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Hospital\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Contact\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Status\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Actions\"})]})}),/*#__PURE__*/_jsxs(\"tbody\",{children:[requests.map(req=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:req.patient_name}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"span\",{className:\"badge bg-danger\",children:req.blood_group})}),/*#__PURE__*/_jsx(\"td\",{children:req.units_required}),/*#__PURE__*/_jsx(\"td\",{children:req.hospital_name}),/*#__PURE__*/_jsx(\"td\",{children:req.contact_mobile}),/*#__PURE__*/_jsxs(\"td\",{children:[req.status==='approved'&&/*#__PURE__*/_jsx(\"span\",{className:\"badge bg-success\",children:\"Approved\"}),req.status==='pending'&&/*#__PURE__*/_jsx(\"span\",{className:\"badge bg-warning\",children:\"Pending\"}),req.status==='rejected'&&/*#__PURE__*/_jsx(\"span\",{className:\"badge bg-danger\",children:\"Rejected\"})]}),/*#__PURE__*/_jsx(\"td\",{children:req.status==='pending'?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-sm btn-success me-2\",onClick:()=>handleUpdateStatus(req._id,'approved'),children:\"Approve\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-sm btn-danger\",onClick:()=>handleUpdateStatus(req._id,'rejected'),children:\"Reject\"})]}):'-'})]},req._id)),requests.length===0&&/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsx(\"td\",{colSpan:\"7\",className:\"text-center\",children:\"No requests found.\"})})]})]})})})})]});}export default ManageRequests;","map":{"version":3,"names":["React","useState","useEffect","useNavigate","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","API_BASE_URL","ManageRequests","requests","setRequests","navigate","fetchRequests","response","fetch","concat","data","json","localStorage","getItem","handleUpdateStatus","requestId","status","method","headers","body","JSON","stringify","children","className","map","req","patient_name","blood_group","units_required","hospital_name","contact_mobile","onClick","_id","length","colSpan"],"sources":["E:/react+mongodb/lifeline/frontend/src/admin/ManageRequests.js"],"sourcesContent":["// src/admin/ManageRequests.jsx\r\nimport React, { useState, useEffect } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\n\r\nconst API_BASE_URL = 'http://localhost:5000';\r\n\r\nfunction ManageRequests() {\r\n  const [requests, setRequests] = useState([]);\r\n  const navigate = useNavigate();\r\n\r\n  const fetchRequests = async () => {\r\n    const response = await fetch(`${API_BASE_URL}/api/admin/requests`);\r\n    const data = await response.json();\r\n    setRequests(data);\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (localStorage.getItem('isAdmin') !== 'true') navigate('/admin/login');\r\n    else fetchRequests();\r\n  }, [navigate]);\r\n\r\n  const handleUpdateStatus = async (requestId, status) => {\r\n    await fetch(`${API_BASE_URL}/api/admin/requests/${requestId}`, {\r\n      method: 'PUT',\r\n      headers: { 'Content-Type': 'application/json' },\r\n      body: JSON.stringify({ status }),\r\n    });\r\n    fetchRequests();\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <h1 className=\"h2 mb-4\">Manage Blood Requests</h1>\r\n      <div className=\"card shadow-sm\">\r\n        <div className=\"card-body\">\r\n          <div className=\"table-responsive\">\r\n            <table className=\"table table-hover\">\r\n              <thead>\r\n                <tr>\r\n                  <th>Patient</th>\r\n                  <th>Blood Group</th>\r\n                  <th>Units</th>\r\n                  <th>Hospital</th>\r\n                  <th>Contact</th>\r\n                  <th>Status</th>\r\n                  <th>Actions</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                {requests.map((req) => (\r\n                  <tr key={req._id}>\r\n                    <td>{req.patient_name}</td>\r\n                    <td>\r\n                      <span className=\"badge bg-danger\">{req.blood_group}</span>\r\n                    </td>\r\n                    <td>{req.units_required}</td>\r\n                    <td>{req.hospital_name}</td>\r\n                    <td>{req.contact_mobile}</td>\r\n                    <td>\r\n                      {req.status === 'approved' && (\r\n                        <span className=\"badge bg-success\">Approved</span>\r\n                      )}\r\n                      {req.status === 'pending' && (\r\n                        <span className=\"badge bg-warning\">Pending</span>\r\n                      )}\r\n                      {req.status === 'rejected' && (\r\n                        <span className=\"badge bg-danger\">Rejected</span>\r\n                      )}\r\n                    </td>\r\n                    <td>\r\n                      {req.status === 'pending' ? (\r\n                        <>\r\n                          <button\r\n                            className=\"btn btn-sm btn-success me-2\"\r\n                            onClick={() => handleUpdateStatus(req._id, 'approved')}\r\n                          >\r\n                            Approve\r\n                          </button>\r\n                          <button\r\n                            className=\"btn btn-sm btn-danger\"\r\n                            onClick={() => handleUpdateStatus(req._id, 'rejected')}\r\n                          >\r\n                            Reject\r\n                          </button>\r\n                        </>\r\n                      ) : (\r\n                        '-'\r\n                      )}\r\n                    </td>\r\n                  </tr>\r\n                ))}\r\n                {requests.length === 0 && (\r\n                  <tr>\r\n                    <td colSpan=\"7\" className=\"text-center\">\r\n                      No requests found.\r\n                    </td>\r\n                  </tr>\r\n                )}\r\n              </tbody>\r\n            </table>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ManageRequests;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}