{"ast":null,"code":"// src/admin/Dashboard.jsx\nimport React,{useState,useEffect}from'react';import{useNavigate}from'react-router-dom';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const API_BASE_URL='http://localhost:5000';// ðŸ” change here if you use Render\nfunction Dashboard(){const[stats,setStats]=useState({donors:0,pending:0,approved:0,totalUnits:0});const[recentRequests,setRecentRequests]=useState([]);const navigate=useNavigate();const loadDashboard=async()=>{try{const res=await fetch(\"\".concat(API_BASE_URL,\"/api/admin/dashboard\"));if(!res.ok){console.error('Dashboard API error:',res.status);return;}const data=await res.json();setStats({donors:data.donors||0,pending:data.pending||0,approved:data.approved||0,totalUnits:data.totalUnits||0});setRecentRequests(data.recentRequests||[]);}catch(err){console.error('Failed to load dashboard:',err);}};useEffect(()=>{if(localStorage.getItem('isAdmin')!=='true'){navigate('/admin/login');}else{loadDashboard();}},[navigate]);return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"h2 mb-4\",children:\"Dashboard\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"row g-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-md-6 col-lg-3\",children:/*#__PURE__*/_jsx(\"div\",{className:\"card text-white bg-primary h-100\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card-body d-flex justify-content-between align-items-center\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"card-title\",children:\"TOTAL DONORS\"}),/*#__PURE__*/_jsx(\"div\",{className:\"display-4 fw-bold\",children:stats.donors})]}),/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-users fa-3x opacity-50\"})]})})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-md-6 col-lg-3\",children:/*#__PURE__*/_jsx(\"div\",{className:\"card text-white bg-warning h-100\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card-body d-flex justify-content-between align-items-center\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"card-title\",children:\"PENDING REQUESTS\"}),/*#__PURE__*/_jsx(\"div\",{className:\"display-4 fw-bold\",children:stats.pending})]}),/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-hourglass-half fa-3x opacity-50\"})]})})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-md-6 col-lg-3\",children:/*#__PURE__*/_jsx(\"div\",{className:\"card text-white bg-success h-100\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card-body d-flex justify-content-between align-items-center\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"card-title\",children:\"APPROVED REQUESTS\"}),/*#__PURE__*/_jsx(\"div\",{className:\"display-4 fw-bold\",children:stats.approved})]}),/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-check-circle fa-3x opacity-50\"})]})})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-md-6 col-lg-3\",children:/*#__PURE__*/_jsx(\"div\",{className:\"card text-white bg-danger h-100\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card-body d-flex justify-content-between align-items-center\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"card-title\",children:\"TOTAL UNITS\"}),/*#__PURE__*/_jsx(\"div\",{className:\"display-4 fw-bold\",children:stats.totalUnits})]}),/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-tint fa-3x opacity-50\"})]})})})]}),/*#__PURE__*/_jsx(\"h2\",{className:\"mt-5 mb-3\",children:\"Recent Blood Requests\"}),/*#__PURE__*/_jsx(\"div\",{className:\"card shadow-sm\",children:/*#__PURE__*/_jsx(\"div\",{className:\"card-body\",children:/*#__PURE__*/_jsx(\"div\",{className:\"table-responsive\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"table table-hover mb-0\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Patient Name\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Blood Group\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Status\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Date Requested\"})]})}),/*#__PURE__*/_jsxs(\"tbody\",{children:[recentRequests.map(req=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:req.patient_name}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"span\",{className:\"badge bg-danger\",children:req.blood_group})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"span\",{className:req.status==='approved'?'badge bg-success':req.status==='pending'?'badge bg-warning':'badge bg-secondary',children:req.status})}),/*#__PURE__*/_jsx(\"td\",{children:new Date(req.created_at).toLocaleString()})]},req._id)),recentRequests.length===0&&/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsx(\"td\",{colSpan:\"4\",className:\"text-center\",children:\"No recent requests found.\"})})]})]})})})})]});}export default Dashboard;","map":{"version":3,"names":["React","useState","useEffect","useNavigate","jsx","_jsx","jsxs","_jsxs","API_BASE_URL","Dashboard","stats","setStats","donors","pending","approved","totalUnits","recentRequests","setRecentRequests","navigate","loadDashboard","res","fetch","concat","ok","console","error","status","data","json","err","localStorage","getItem","children","className","map","req","patient_name","blood_group","Date","created_at","toLocaleString","_id","length","colSpan"],"sources":["E:/react+mongodb/lifeline/frontend/src/admin/Dashboard.js"],"sourcesContent":["// src/admin/Dashboard.jsx\r\nimport React, { useState, useEffect } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\n\r\nconst API_BASE_URL = 'http://localhost:5000'; // ðŸ” change here if you use Render\r\n\r\nfunction Dashboard() {\r\n  const [stats, setStats] = useState({\r\n    donors: 0,\r\n    pending: 0,\r\n    approved: 0,\r\n    totalUnits: 0,\r\n  });\r\n  const [recentRequests, setRecentRequests] = useState([]);\r\n  const navigate = useNavigate();\r\n\r\n  const loadDashboard = async () => {\r\n    try {\r\n      const res = await fetch(`${API_BASE_URL}/api/admin/dashboard`);\r\n      if (!res.ok) {\r\n        console.error('Dashboard API error:', res.status);\r\n        return;\r\n      }\r\n      const data = await res.json();\r\n      setStats({\r\n        donors: data.donors || 0,\r\n        pending: data.pending || 0,\r\n        approved: data.approved || 0,\r\n        totalUnits: data.totalUnits || 0,\r\n      });\r\n      setRecentRequests(data.recentRequests || []);\r\n    } catch (err) {\r\n      console.error('Failed to load dashboard:', err);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (localStorage.getItem('isAdmin') !== 'true') {\r\n      navigate('/admin/login');\r\n    } else {\r\n      loadDashboard();\r\n    }\r\n  }, [navigate]);\r\n\r\n  return (\r\n    <div>\r\n      <h1 className=\"h2 mb-4\">Dashboard</h1>\r\n\r\n      {/* Stat Cards */}\r\n      <div className=\"row g-4\">\r\n        <div className=\"col-md-6 col-lg-3\">\r\n          <div className=\"card text-white bg-primary h-100\">\r\n            <div className=\"card-body d-flex justify-content-between align-items-center\">\r\n              <div>\r\n                <div className=\"card-title\">TOTAL DONORS</div>\r\n                <div className=\"display-4 fw-bold\">{stats.donors}</div>\r\n              </div>\r\n              <i className=\"fas fa-users fa-3x opacity-50\"></i>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"col-md-6 col-lg-3\">\r\n          <div className=\"card text-white bg-warning h-100\">\r\n            <div className=\"card-body d-flex justify-content-between align-items-center\">\r\n              <div>\r\n                <div className=\"card-title\">PENDING REQUESTS</div>\r\n                <div className=\"display-4 fw-bold\">{stats.pending}</div>\r\n              </div>\r\n              <i className=\"fas fa-hourglass-half fa-3x opacity-50\"></i>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"col-md-6 col-lg-3\">\r\n          <div className=\"card text-white bg-success h-100\">\r\n            <div className=\"card-body d-flex justify-content-between align-items-center\">\r\n              <div>\r\n                <div className=\"card-title\">APPROVED REQUESTS</div>\r\n                <div className=\"display-4 fw-bold\">{stats.approved}</div>\r\n              </div>\r\n              <i className=\"fas fa-check-circle fa-3x opacity-50\"></i>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"col-md-6 col-lg-3\">\r\n          <div className=\"card text-white bg-danger h-100\">\r\n            <div className=\"card-body d-flex justify-content-between align-items-center\">\r\n              <div>\r\n                <div className=\"card-title\">TOTAL UNITS</div>\r\n                <div className=\"display-4 fw-bold\">{stats.totalUnits}</div>\r\n              </div>\r\n              <i className=\"fas fa-tint fa-3x opacity-50\"></i>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Recent Requests */}\r\n      <h2 className=\"mt-5 mb-3\">Recent Blood Requests</h2>\r\n      <div className=\"card shadow-sm\">\r\n        <div className=\"card-body\">\r\n          <div className=\"table-responsive\">\r\n            <table className=\"table table-hover mb-0\">\r\n              <thead>\r\n                <tr>\r\n                  <th>Patient Name</th>\r\n                  <th>Blood Group</th>\r\n                  <th>Status</th>\r\n                  <th>Date Requested</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                {recentRequests.map((req) => (\r\n                  <tr key={req._id}>\r\n                    <td>{req.patient_name}</td>\r\n                    <td>\r\n                      <span className=\"badge bg-danger\">{req.blood_group}</span>\r\n                    </td>\r\n                    <td>\r\n                      <span\r\n                        className={\r\n                          req.status === 'approved'\r\n                            ? 'badge bg-success'\r\n                            : req.status === 'pending'\r\n                            ? 'badge bg-warning'\r\n                            : 'badge bg-secondary'\r\n                        }\r\n                      >\r\n                        {req.status}\r\n                      </span>\r\n                    </td>\r\n                    <td>{new Date(req.created_at).toLocaleString()}</td>\r\n                  </tr>\r\n                ))}\r\n                {recentRequests.length === 0 && (\r\n                  <tr>\r\n                    <td colSpan=\"4\" className=\"text-center\">\r\n                      No recent requests found.\r\n                    </td>\r\n                  </tr>\r\n                )}\r\n              </tbody>\r\n            </table>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Dashboard;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}