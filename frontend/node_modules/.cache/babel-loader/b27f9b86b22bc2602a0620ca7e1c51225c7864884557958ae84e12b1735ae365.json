{"ast":null,"code":"// src/admin/StockReport.jsx\nimport React,{useState,useEffect}from'react';import{useNavigate}from'react-router-dom';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const API_BASE_URL='http://localhost:5000';function StockReport(){const[stock,setStock]=useState([]);const navigate=useNavigate();useEffect(()=>{if(localStorage.getItem('isAdmin')!=='true'){navigate('/admin/login');}else{const fetchStock=async()=>{const response=await fetch(\"\".concat(API_BASE_URL,\"/api/admin/stock\"));const data=await response.json();setStock(data);};fetchStock();}},[navigate]);const handleUnitChange=(index,value)=>{const updatedStock=[...stock];updatedStock[index].units=Math.max(0,parseInt(value,10)||0);setStock(updatedStock);};const handleUpdateStock=async()=>{await fetch(\"\".concat(API_BASE_URL,\"/api/admin/stock\"),{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(stock)});alert('Stock updated!');};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"h2 mb-4\",children:\"Blood Stock Report\"}),/*#__PURE__*/_jsx(\"div\",{className:\"card shadow-sm\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card-body\",children:[/*#__PURE__*/_jsxs(\"table\",{className:\"table table-bordered align-middle\",children:[/*#__PURE__*/_jsx(\"thead\",{className:\"table-dark\",children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Blood Group\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Available Units\"}),/*#__PURE__*/_jsx(\"th\",{style:{width:'200px'},children:\"Update Units\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:stock.map((item,index)=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{className:\"fw-bold fs-5\",children:item.blood_group}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"div\",{className:\"progress\",style:{height:'25px'},children:/*#__PURE__*/_jsxs(\"div\",{className:\"progress-bar\",role:\"progressbar\",style:{width:\"\".concat(item.units*2,\"%\")},children:[item.units,\" Units\"]})})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"input\",{type:\"number\",className:\"form-control\",value:item.units,onChange:e=>handleUnitChange(index,e.target.value)})})]},item._id))})]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-end mt-3\",children:/*#__PURE__*/_jsxs(\"button\",{className:\"btn btn-primary\",onClick:handleUpdateStock,children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-save me-2\"}),\"Update Stock\"]})})]})})]});}export default StockReport;","map":{"version":3,"names":["React","useState","useEffect","useNavigate","jsx","_jsx","jsxs","_jsxs","API_BASE_URL","StockReport","stock","setStock","navigate","localStorage","getItem","fetchStock","response","fetch","concat","data","json","handleUnitChange","index","value","updatedStock","units","Math","max","parseInt","handleUpdateStock","method","headers","body","JSON","stringify","alert","children","className","style","width","map","item","blood_group","height","role","type","onChange","e","target","_id","onClick"],"sources":["E:/react+mongodb/lifeline/frontend/src/admin/StockReport.js"],"sourcesContent":["// src/admin/StockReport.jsx\r\nimport React, { useState, useEffect } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\n\r\nconst API_BASE_URL = 'http://localhost:5000';\r\n\r\nfunction StockReport() {\r\n  const [stock, setStock] = useState([]);\r\n  const navigate = useNavigate();\r\n\r\n  useEffect(() => {\r\n    if (localStorage.getItem('isAdmin') !== 'true') {\r\n      navigate('/admin/login');\r\n    } else {\r\n      const fetchStock = async () => {\r\n        const response = await fetch(`${API_BASE_URL}/api/admin/stock`);\r\n        const data = await response.json();\r\n        setStock(data);\r\n      };\r\n      fetchStock();\r\n    }\r\n  }, [navigate]);\r\n\r\n  const handleUnitChange = (index, value) => {\r\n    const updatedStock = [...stock];\r\n    updatedStock[index].units = Math.max(0, parseInt(value, 10) || 0);\r\n    setStock(updatedStock);\r\n  };\r\n\r\n  const handleUpdateStock = async () => {\r\n    await fetch(`${API_BASE_URL}/api/admin/stock`, {\r\n      method: 'POST',\r\n      headers: { 'Content-Type': 'application/json' },\r\n      body: JSON.stringify(stock),\r\n    });\r\n    alert('Stock updated!');\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <h1 className=\"h2 mb-4\">Blood Stock Report</h1>\r\n      <div className=\"card shadow-sm\">\r\n        <div className=\"card-body\">\r\n          <table className=\"table table-bordered align-middle\">\r\n            <thead className=\"table-dark\">\r\n              <tr>\r\n                <th>Blood Group</th>\r\n                <th>Available Units</th>\r\n                <th style={{ width: '200px' }}>Update Units</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {stock.map((item, index) => (\r\n                <tr key={item._id}>\r\n                  <td className=\"fw-bold fs-5\">{item.blood_group}</td>\r\n                  <td>\r\n                    <div className=\"progress\" style={{ height: '25px' }}>\r\n                      <div\r\n                        className=\"progress-bar\"\r\n                        role=\"progressbar\"\r\n                        style={{ width: `${item.units * 2}%` }}\r\n                      >\r\n                        {item.units} Units\r\n                      </div>\r\n                    </div>\r\n                  </td>\r\n                  <td>\r\n                    <input\r\n                      type=\"number\"\r\n                      className=\"form-control\"\r\n                      value={item.units}\r\n                      onChange={(e) => handleUnitChange(index, e.target.value)}\r\n                    />\r\n                  </td>\r\n                </tr>\r\n              ))}\r\n            </tbody>\r\n          </table>\r\n          <div className=\"text-end mt-3\">\r\n            <button className=\"btn btn-primary\" onClick={handleUpdateStock}>\r\n              <i className=\"fas fa-save me-2\"></i>Update Stock\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default StockReport;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}