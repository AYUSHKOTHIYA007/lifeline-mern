{"ast":null,"code":"// src/admin/ManageDonors.jsx\nimport React,{useEffect,useState}from'react';import{useNavigate}from'react-router-dom';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const API_BASE_URL='http://localhost:5000';function ManageDonors(){const[donors,setDonors]=useState([]);const navigate=useNavigate();const fetchDonors=async()=>{const res=await fetch(\"\".concat(API_BASE_URL,\"/api/admin/donors\"));const data=await res.json();setDonors(data);};useEffect(()=>{if(localStorage.getItem('isAdmin')!=='true')navigate('/admin/login');else fetchDonors();},[navigate]);const handleDelete=async id=>{if(!window.confirm('Delete this donor?'))return;await fetch(\"\".concat(API_BASE_URL,\"/api/admin/donors/\").concat(id),{method:'DELETE'});fetchDonors();};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex justify-content-between align-items-center mb-4\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"h2 mb-0\",children:\"Manage Donors\"}),/*#__PURE__*/_jsxs(\"button\",{className:\"btn btn-primary\",onClick:()=>navigate('/admin/donors/add'),children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-plus me-2\"}),\"Add New Donor\"]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"card shadow-sm\",children:/*#__PURE__*/_jsx(\"div\",{className:\"card-body\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"table table-hover mb-0\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"#\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Name\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Email\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Blood Group\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Mobile\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Address\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Actions\"})]})}),/*#__PURE__*/_jsxs(\"tbody\",{children:[donors.map((d,idx)=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:idx+1}),/*#__PURE__*/_jsx(\"td\",{children:d.name}),/*#__PURE__*/_jsx(\"td\",{children:d.email}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"span\",{className:\"badge bg-danger\",children:d.blood_group})}),/*#__PURE__*/_jsx(\"td\",{children:d.mobile}),/*#__PURE__*/_jsx(\"td\",{children:d.address_line||d.address||\"\".concat(d.city||'',\" \").concat(d.state||'')}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsxs(\"button\",{className:\"btn btn-sm btn-danger\",onClick:()=>handleDelete(d._id),children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-trash-alt me-1\"}),\"Delete\"]})})]},d._id)),donors.length===0&&/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsx(\"td\",{colSpan:\"7\",className:\"text-center\",children:\"No donors found.\"})})]})]})})})]});}export default ManageDonors;","map":{"version":3,"names":["React","useEffect","useState","useNavigate","jsx","_jsx","jsxs","_jsxs","API_BASE_URL","ManageDonors","donors","setDonors","navigate","fetchDonors","res","fetch","concat","data","json","localStorage","getItem","handleDelete","id","window","confirm","method","children","className","onClick","map","d","idx","name","email","blood_group","mobile","address_line","address","city","state","_id","length","colSpan"],"sources":["E:/react+mongodb/lifeline/frontend/src/admin/ManageDonors.js"],"sourcesContent":["// src/admin/ManageDonors.jsx\r\nimport React, { useEffect, useState } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\n\r\nconst API_BASE_URL = 'http://localhost:5000';\r\n\r\nfunction ManageDonors() {\r\n  const [donors, setDonors] = useState([]);\r\n  const navigate = useNavigate();\r\n\r\n  const fetchDonors = async () => {\r\n    const res = await fetch(`${API_BASE_URL}/api/admin/donors`);\r\n    const data = await res.json();\r\n    setDonors(data);\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (localStorage.getItem('isAdmin') !== 'true') navigate('/admin/login');\r\n    else fetchDonors();\r\n  }, [navigate]);\r\n\r\n  const handleDelete = async (id) => {\r\n    if (!window.confirm('Delete this donor?')) return;\r\n    await fetch(`${API_BASE_URL}/api/admin/donors/${id}`, {\r\n      method: 'DELETE',\r\n    });\r\n    fetchDonors();\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <div className=\"d-flex justify-content-between align-items-center mb-4\">\r\n        <h1 className=\"h2 mb-0\">Manage Donors</h1>\r\n        <button\r\n          className=\"btn btn-primary\"\r\n          onClick={() => navigate('/admin/donors/add')}\r\n        >\r\n          <i className=\"fas fa-plus me-2\"></i>Add New Donor\r\n        </button>\r\n      </div>\r\n\r\n      <div className=\"card shadow-sm\">\r\n        <div className=\"card-body\">\r\n          <table className=\"table table-hover mb-0\">\r\n            <thead>\r\n              <tr>\r\n                <th>#</th>\r\n                <th>Name</th>\r\n                <th>Email</th>\r\n                <th>Blood Group</th>\r\n                <th>Mobile</th>\r\n                <th>Address</th>\r\n                <th>Actions</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {donors.map((d, idx) => (\r\n                <tr key={d._id}>\r\n                  <td>{idx + 1}</td>\r\n                  <td>{d.name}</td>\r\n                  <td>{d.email}</td>\r\n                  <td>\r\n                    <span className=\"badge bg-danger\">{d.blood_group}</span>\r\n                  </td>\r\n                  <td>{d.mobile}</td>\r\n                  <td>\r\n                    {d.address_line ||\r\n                      d.address ||\r\n                      `${d.city || ''} ${d.state || ''}`}\r\n                  </td>\r\n                  <td>\r\n                    <button\r\n                      className=\"btn btn-sm btn-danger\"\r\n                      onClick={() => handleDelete(d._id)}\r\n                    >\r\n                      <i className=\"fas fa-trash-alt me-1\"></i>Delete\r\n                    </button>\r\n                  </td>\r\n                </tr>\r\n              ))}\r\n              {donors.length === 0 && (\r\n                <tr>\r\n                  <td colSpan=\"7\" className=\"text-center\">\r\n                    No donors found.\r\n                  </td>\r\n                </tr>\r\n              )}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ManageDonors;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}